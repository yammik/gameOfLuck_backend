require 'rest-client'
require 'json'

Player.destroy_all
Country.destroy_all

countries_url = 'http://api.population.io/1.0/countries/?format=json'
country_names = JSON.parse(RestClient.get(countries_url))
country_statuses = JSON.parse(RestClient.get('http://api.worldbank.org/v2/countries?format=json'))[1]
all_bounds = [
  { name: 'Aruba',
    iso: 'ABW',
    bounds: { lat_min: 12.1702998, lat_max: 12.8102998, lon_min: -70.2809842, lon_max: -69.6409842}
  },
  { name: 'Afghanistan',
    iso: 'AFG',
    bounds: { lat_min: 29.3772, lat_max: 38.4910682, lon_min: 60.5176034, lon_max: 74.889862}
  },
  { name: 'Angola', iso: 'AGO', bounds: { lat_min: -18.038945, lat_max: -4.3880634, lon_min: 11.4609793, lon_max: 24.0878856} }, { name: 'Anguilla', iso: 'AIA', bounds: { lat_min: 18.0615454, lat_max: 18.7951194, lon_min: -63.6391992, lon_max: -62.7125449} }, { name: '¬Åland Islands', iso: 'ALA', bounds: { lat_min: 59.4541578, lat_max: 60.87665, lon_min: 19.0832098, lon_max: 21.3456556} }, { name: 'Albania', iso: 'ALB', bounds: { lat_min: 11.081041, lat_max: 11.408791, lon_min: -72.6598913, lon_max: -72.4039128} }, { name: 'Andorra', iso: 'AND', bounds: { lat_min: 42.4288238, lat_max: 42.6559357, lon_min: 1.4135781, lon_max: 1.7863837} }, { name: 'Netherlands Antilles', iso: 'ANT', bounds: { lat_min: 12.1544542, lat_max: 12.1547472, lon_min: -68.940593, lon_max: -68.9403518} }, { name: 'United Arab Emirates', iso: 'ARE', bounds: { lat_min: 22.6444, lat_max: 26.2822, lon_min: 51.498, lon_max: 56.3834} }, { name: 'Argentina', iso: 'ARG', bounds: { lat_min: -55.1850761, lat_max: -21.781168, lon_min: -73.5600329, lon_max: -53.6374515} }, { name: 'Armenia', iso: 'ARM', bounds: { lat_min: 4.3951997, lat_max: 4.5895768, lon_min: -75.7854388, lon_max: -75.6325211} }, { name: 'American Samoa', iso: 'ASM', bounds: { lat_min: -14.7608358, lat_max: -10.8449746, lon_min: -171.2951296, lon_max: -167.9322899} }, { name: 'Antarctica', iso: 'ATA', bounds: { lat_min: -85.0511287, lat_max: -60, lon_min: -180, lon_max: 180} }, { name: 'French Southern Territories', iso: 'ATF', bounds: { lat_min: -50.2187169, lat_max: -11.3139928, lon_min: 39.4138676, lon_max: 77.8494974} }, { name: 'Antigua and Barbuda', iso: 'ATG', bounds: { lat_min: 16.7573901, lat_max: 17.929, lon_min: -62.5536517, lon_max: -61.447857} }, { name: 'Australia', iso: 'AUS', bounds: { lat_min: -55.3228175, lat_max: -9.0882278, lon_min: 72.2460938, lon_max: 168.2249543} }, { name: 'Austria', iso: 'AUT', bounds: { lat_min: 46.3722761, lat_max: 49.0205305, lon_min: 9.5307487, lon_max: 17.160776} }, { name: 'Azerbaijan', iso: 'AZE', bounds: { lat_min: 38.3929551, lat_max: 41.9502947, lon_min: 44.7633701, lon_max: 51.0090302} }, { name: 'Burundi', iso: 'BDI', bounds: { lat_min: -4.4693155, lat_max: -2.3096796, lon_min: 29.0007401, lon_max: 30.8498462} }, { name: 'Belgium', iso: 'BEL', bounds: { lat_min: 49.4969821, lat_max: 51.5516667, lon_min: 2.3889137, lon_max: 6.408097} }, { name: 'Benin', iso: 'BEN', bounds: { lat_min: 6.1730586, lat_max: 6.4930586, lon_min: 5.4621058, lon_max: 5.7821058} }, { name: 'Burkina Faso', iso: 'BFA', bounds: { lat_min: 9.4104718, lat_max: 15.084, lon_min: -5.5132416, lon_max: 2.4089717} }, { name: 'Bangladesh', iso: 'BGD', bounds: { lat_min: 20.3756582, lat_max: 26.6382534, lon_min: 88.0075306, lon_max: 92.6804979} }, { name: 'Bulgaria', iso: 'BGR', bounds: { lat_min: 41.2353929, lat_max: 44.2167064, lon_min: 22.3571459, lon_max: 28.8875409} }, { name: 'Bahrain', iso: 'BHR', bounds: { lat_min: 35.1878012, lat_max: 35.2278012, lon_min: 72.5273968, lon_max: 72.5673968} }, { name: 'Bahamas', iso: 'BHS', bounds: { lat_min: 20.7059846, lat_max: 27.4734551, lon_min: -80.7001941, lon_max: -72.4477521} }, { name: 'Bosnia and Herzegovina', iso: 'BIH', bounds: { lat_min: 42.5553114, lat_max: 45.2764135, lon_min: 15.7287433, lon_max: 19.6237311} }, { name: 'Saint Barth_lemy', iso: 'BLM', bounds: { lat_min: 17.670931, lat_max: 18.1375569, lon_min: -63.06639, lon_max: -62.5844019} }, { name: 'Belarus', iso: 'BLR', bounds: { lat_min: 51.2575982, lat_max: 56.17218, lon_min: 23.1783344, lon_max: 32.7627809} }, { name: 'Belize', iso: 'BLZ', bounds: { lat_min: 15.8857286, lat_max: 18.496001, lon_min: -89.2262083, lon_max: -87.3098494} }, { name: 'Bermuda', iso: 'BMU', bounds: { lat_min: 32.0469651, lat_max: 32.5913693, lon_min: -65.1232222, lon_max: -64.4109842} }, { name: 'Bolivia', iso: 'BOL', bounds: { lat_min: -22.8982742, lat_max: -9.6689438, lon_min: -69.6450073, lon_max: -57.453} }, { name: 'Brazil', iso: 'BRA', bounds: { lat_min: -33.8689056, lat_max: 5.2842873, lon_min: -73.9830625, lon_max: -28.6341164} }, { name: 'Barbados', iso: 'BRB', bounds: { lat_min: 12.845, lat_max: 13.535, lon_min: -59.8562115, lon_max: -59.2147175} }, { name: 'Brunei Darussalam', iso: 'BRN', bounds: { lat_min: 4.002508, lat_max: 5.1011857, lon_min: 114.0758734, lon_max: 115.3635623} }, { name: 'Bhutan', iso: 'BTN', bounds: { lat_min: 26.702016, lat_max: 28.246987, lon_min: 88.7464724, lon_max: 92.1252321} }, { name: 'Bouvet Island', iso: 'BVT', bounds: { lat_min: -54.654, lat_max: -54.187, lon_min: 2.9345531, lon_max: 3.7791099} }, { name: 'Botswana', iso: 'BWA', bounds: { lat_min: -26.9059669, lat_max: -17.778137, lon_min: 19.9986474, lon_max: 29.375304} }, { name: 'Central African Republic', iso: 'CAF', bounds: { lat_min: 25.217277, lat_max: 25.2194356, lon_min: 55.1742999, lon_max: 55.1762608} }, { name: 'Canada', iso: 'CAN', bounds: { lat_min: 41.6765556, lat_max: 83.3362128, lon_min: -141.00275, lon_max: -52.3231981} }, { name: 'Cocos (Keeling) Islands', iso: 'CCK', bounds: { lat_min: -12.4055983, lat_max: -11.6213132, lon_min: 96.612524, lon_max: 97.1357343} }, { name: 'Switzerland', iso: 'CHE', bounds: { lat_min: 45.817995, lat_max: 47.8084648, lon_min: 5.9559113, lon_max: 10.4922941} }, { name: 'Chile', iso: 'CHL', bounds: { lat_min: -56.725, lat_max: -17.4983998, lon_min: -109.6795789, lon_max: -66.0753474} }, { name: 'China', iso: 'CHN', bounds: { lat_min: 25.0671341, lat_max: 25.9161824, lon_min: -99.4612273, lon_max: -98.421576} }, { name: 'Ivory Coast', iso: 'CIV', bounds: { lat_min: 4.1621205, lat_max: 10.740197, lon_min: -8.601725, lon_max: -2.493031} }, { name: 'Cameroon', iso: 'CMR', bounds: { lat_min: 1.6546659, lat_max: 13.083333, lon_min: 8.3822176, lon_max: 16.1921476} }, { name: 'Congo', iso: 'COD', bounds: { lat_min: -4.2726671, lat_max: -4.2723703, lon_min: 15.2829578, lon_max: 15.283136} }, { name: 'Congo', iso: 'COG', bounds: { lat_min: -5.149089, lat_max: 3.713056, lon_min: 11.0048205, lon_max: 18.643611} }, { name: 'Cook Islands', iso: 'COK', bounds: { lat_min: -22.15807, lat_max: -8.7168792, lon_min: -166.0856468, lon_max: -157.1089329} }, { name: 'Colombia', iso: 'COL', bounds: { lat_min: -4.2316872, lat_max: 16.0571269, lon_min: -82.1243666, lon_max: -66.8511907} }, { name: 'Comoros', iso: 'COM', bounds: { lat_min: -12.621, lat_max: -11.165, lon_min: 43.025305, lon_max: 44.7451922} }, { name: 'Cape Verde', iso: 'CPV', bounds: { lat_min: 14.8031546, lat_max: 17.2053108, lon_min: -25.3609478, lon_max: -22.6673416} }, { name: 'Costa Rica', iso: 'CRI', bounds: { lat_min: 5.3329698, lat_max: 11.2195684, lon_min: -87.2722647, lon_max: -82.5060208} }, { name: 'Cuba', iso: 'CUB', bounds: { lat_min: 19.6275294, lat_max: 23.4816972, lon_min: -85.1679702, lon_max: -73.9190004} }, { name: 'Christmas Island', iso: 'CXR', bounds: { lat_min: -10.5698515, lat_max: -10.4123553, lon_min: 105.5336422, lon_max: 105.7130159} }, { name: 'Cayman Islands', iso: 'CYM', bounds: { lat_min: 19.0620619, lat_max: 19.9573759, lon_min: -81.6313748, lon_max: -79.5110954} }, { name: 'Cyprus', iso: 'CYP', bounds: { lat_min: 27.4823018, lat_max: 42.4823018, lon_min: 25.6451285, lon_max: 40.6451285} }, { name: 'Czech Republic', iso: 'CZE', bounds: { lat_min: 48.5518083, lat_max: 51.0557036, lon_min: 12.0905901, lon_max: 18.859216} }, { name: 'Germany', iso: 'DEU', bounds: { lat_min: 47.2701114, lat_max: 55.099161, lon_min: 5.8663153, lon_max: 15.0419319} }, { name: 'Djibouti', iso: 'DJI', bounds: { lat_min: 10.9149547, lat_max: 12.7923081, lon_min: 41.7713139, lon_max: 43.6579046} }, { name: 'Dominica', iso: 'DMA', bounds: { lat_min: 15.0074207, lat_max: 15.7872222, lon_min: -61.6869184, lon_max: -61.0329895} }, { name: 'Denmark', iso: 'DNK', bounds: { lat_min: 54.4516667, lat_max: 57.9524297, lon_min: 7.7153255, lon_max: 15.5530641} }, { name: 'Dominican Republic', iso: 'DOM', bounds: { lat_min: 17.2701708, lat_max: 21.303433, lon_min: -72.0574706, lon_max: -68.1101463} }, { name: 'Algeria', iso: 'DZA', bounds: { lat_min: 18.968147, lat_max: 37.2962055, lon_min: -8.668908, lon_max: 11.997337} }, { name: 'Ecuador', iso: 'ECU', bounds: { lat_min: -5.0159314, lat_max: 1.8835964, lon_min: -92.2072392, lon_max: -75.192504} }, { name: 'Egypt', iso: 'EGY', bounds: { lat_min: 22, lat_max: 31.8330854, lon_min: 24.6499112, lon_max: 37.1153517} }, { name: 'Eritrea', iso: 'ERI', bounds: { lat_min: 25.2197993, lat_max: 25.2220008, lon_min: 55.1720522, lon_max: 55.1736716} }, { name: 'Western Sahara', iso: 'ESH', bounds: { lat_min: 24.1597324, lat_max: 24.1997324, lon_min: -13.7867848, lon_max: -13.7467848} }, { name: 'Spain', iso: 'ESP', bounds: { lat_min: 27.4335426, lat_max: 43.9933088, lon_min: -18.3936845, lon_max: 4.5918885} }, { name: 'Estonia', iso: 'EST', bounds: { lat_min: 57.5092997, lat_max: 59.9383754, lon_min: 21.3826069, lon_max: 28.2100175} }, { name: 'Ethiopia', iso: 'ETH', bounds: { lat_min: 3.397448, lat_max: 14.8940537, lon_min: 32.9975838, lon_max: 47.9823797} }, { name: 'Finland', iso: 'FIN', bounds: { lat_min: 59.4541578, lat_max: 70.0922939, lon_min: 19.0832098, lon_max: 31.5867071} }, { name: 'Fiji', iso: 'FJI', bounds: { lat_min: -21.9434274, lat_max: -12.2613866, lon_min: -180, lon_max: 180} }, { name: 'Falkland Islands (Malvinas)', iso: 'FLK', bounds: { lat_min: -53.1186766, lat_max: -50.7973007, lon_min: -61.7726772, lon_max: -57.3662367} }, { name: 'France', iso: 'FRA', bounds: { lat_min: 41.2632185, lat_max: 51.268318, lon_min: -5.4534286, lon_max: 9.8678344} }, { name: 'Faroe Islands', iso: 'FRO', bounds: { lat_min: 61.3915553, lat_max: 62.3942991, lon_min: -7.6882939, lon_max: -6.2565525} }, { name: 'Micronesia', iso: 'FSM', bounds: { lat_min: 0.827, lat_max: 10.291, lon_min: 137.2234512, lon_max: 163.2364054} }, { name: 'Gabon', iso: 'GAB', bounds: { lat_min: -4.1012261, lat_max: 2.3182171, lon_min: 8.5002246, lon_max: 14.539444} }, { name: 'United Kingdom', iso: 'GBR', bounds: { lat_min: 25.2223186, lat_max: 25.2241651, lon_min: 55.1579517, lon_max: 55.1606916} }, { name: 'Georgia', iso: 'GEO', bounds: { lat_min: 30.355757, lat_max: 35.0013544, lon_min: -85.6051201, lon_max: -80.7514321} }, { name: 'Guernsey', iso: 'GGY', bounds: { lat_min: 49.4155331, lat_max: 49.5090776, lon_min: -2.6751703, lon_max: -2.501814} }, { name: 'Ghana', iso: 'GHA', bounds: { lat_min: 4.5392525, lat_max: 11.1748562, lon_min: -3.260786, lon_max: 1.2732942} }, { name: 'Gibraltar', iso: 'GIB', bounds: { lat_min: 36.100807, lat_max: 36.180807, lon_min: -5.3941295, lon_max: -5.3141295} }, { name: 'Guinea', iso: 'GIN', bounds: { lat_min: 38.1240893, lat_max: 38.1640893, lon_min: -77.4591124, lon_max: -77.4191124} }, { name: 'Guadeloupe', iso: 'GLP', bounds: { lat_min: 15.8320085, lat_max: 16.5144664, lon_min: -61.809764, lon_max: -61.0003663} }, { name: 'Gambia', iso: 'GMB', bounds: { lat_min: 13.061, lat_max: 13.8253137, lon_min: -17.0288254, lon_max: -13.797778} }, { name: 'Guinea-Bissau', iso: 'GNB', bounds: { lat_min: 10.6514215, lat_max: 12.6862384, lon_min: -16.894523, lon_max: -13.6348777} }, { name: 'Equatorial Guinea', iso: 'GNQ', bounds: { lat_min: -1.6732196, lat_max: 3.989, lon_min: 5.4172943, lon_max: 11.3598628} }, { name: 'Greece', iso: 'GRC', bounds: { lat_min: 34.7006096, lat_max: 41.7488862, lon_min: 19.2477876, lon_max: 29.7296986} }, { name: 'Grenada', iso: 'GRD', bounds: { lat_min: 11.786, lat_max: 12.5966532, lon_min: -62.0065868, lon_max: -61.1732143} }, { name: 'Greenland', iso: 'GRL', bounds: { lat_min: 43.0015105, lat_max: 43.0770931, lon_min: -70.907562, lon_max: -70.805801} }, { name: 'Guatemala', iso: 'GTM', bounds: { lat_min: 13.6345804, lat_max: 17.8165947, lon_min: -92.3105242, lon_max: -88.1755849} }, { name: 'French Guiana', iso: 'GUF', bounds: { lat_min: 2.112222, lat_max: 5.7507111, lon_min: -54.60278, lon_max: -51.6346139} }, { name: 'Guam', iso: 'GUM', bounds: { lat_min: 13.182335, lat_max: 13.706179, lon_min: 144.563426, lon_max: 145.009167} }, { name: 'Guyana', iso: 'GUY', bounds: { lat_min: 1.1710017, lat_max: 8.6038842, lon_min: -61.414905, lon_max: -56.4689543} }, { name: 'Hong Kong', iso: 'HKG', bounds: { lat_min: 22.1193278, lat_max: 22.4393278, lon_min: 114.0028131, lon_max: 114.3228131} }, { name: 'Heard Island and McDonald Islands', iso: 'HMD', bounds: { lat_min: -53.394741, lat_max: -52.7030677, lon_min: 72.2460938, lon_max: 74.1988754} }, { name: 'Honduras', iso: 'HND', bounds: { lat_min: 12.9808485, lat_max: 17.619526, lon_min: -89.3568207, lon_max: -82.1729621} }, { name: 'Croatia', iso: 'HRV', bounds: { lat_min: 42.1765993, lat_max: 46.555029, lon_min: 13.2104814, lon_max: 19.4470842} }, { name: 'Haiti', iso: 'HTI', bounds: { lat_min: 21.7470269, lat_max: 21.7870269, lon_min: -78.1147805, lon_max: -78.0747805} }, { name: 'Hungary', iso: 'HUN', bounds: { lat_min: 45.737128, lat_max: 48.585257, lon_min: 16.1138867, lon_max: 22.8977094} }, { name: 'Indonesia', iso: 'IDN', bounds: { lat_min: -11.2085669, lat_max: 6.2744496, lon_min: 94.7717124, lon_max: 141.0194444} }, { name: 'Isle of Man', iso: 'IMN', bounds: { lat_min: 54.0539576, lat_max: 54.4178705, lon_min: -4.7946845, lon_max: -4.3076853} }, { name: 'India', iso: 'IND', bounds: { lat_min: 6.5546079, lat_max: 35.6745457, lon_min: 68.1113787, lon_max: 97.395561} }, { name: 'British Indian Ocean Territory', iso: 'IOT', bounds: { lat_min: -7.6454079, lat_max: -5.037066, lon_min: 71.036504, lon_max: 72.7020157} }, { name: 'Ireland', iso: 'IRL', bounds: { lat_min: 51.222, lat_max: 55.636, lon_min: -11.0133788, lon_max: -5.6582363} }, { name: 'Iran', iso: 'IRN', bounds: { lat_min: 24.8465103, lat_max: 39.7816502, lon_min: 44.0318908, lon_max: 63.3332704} }, { name: 'Iraq', iso: 'IRQ', bounds: { lat_min: 29.0585661, lat_max: 37.380932, lon_min: 38.7936719, lon_max: 48.8412702} }, { name: 'Iceland', iso: 'ISL', bounds: { lat_min: 51.3863696, lat_max: 51.3868275, lon_min: 0.5475318, lon_max: 0.5479162} }, { name: 'Israel', iso: 'ISR', bounds: { lat_min: 29.4533796, lat_max: 33.3356317, lon_min: 34.2674994, lon_max: 35.8950234} }, { name: 'Italy', iso: 'ITA', bounds: { lat_min: 35.2889616, lat_max: 47.0921462, lon_min: 6.6272658, lon_max: 18.7844746} }, { name: 'Jamaica', iso: 'JAM', bounds: { lat_min: 16.5899443, lat_max: 18.7256394, lon_min: -78.5782366, lon_max: -75.7541143} }, { name: 'Jersey', iso: 'JEY', bounds: { lat_min: 49.1625179, lat_max: 49.2621288, lon_min: -2.254512, lon_max: -2.0104193} }, { name: 'Jordan', iso: 'JOR', bounds: { lat_min: 10.5378127, lat_max: 10.6910595, lon_min: 122.4078085, lon_max: 122.6356296} }, { name: 'Japan', iso: 'JPN', bounds: { lat_min: 20.2145811, lat_max: 45.7112046, lon_min: 122.7141754, lon_max: 154.205541} }, { name: 'Kazakhstan', iso: 'KAZ', bounds: { lat_min: 40.5686476, lat_max: 55.4421701, lon_min: 46.4932179, lon_max: 87.3156316} }, { name: 'Kenya', iso: 'KEN', bounds: { lat_min: -4.8995204, lat_max: 4.62, lon_min: 33.9098987, lon_max: 41.899578} }, { name: 'Kyrgyzstan', iso: 'KGZ', bounds: { lat_min: 39.1728437, lat_max: 43.2667971, lon_min: 69.2649523, lon_max: 80.2295793} }, { name: 'Cambodia', iso: 'KHM', bounds: { lat_min: 9.4752639, lat_max: 14.6904224, lon_min: 102.3338282, lon_max: 107.6276788} }, { name: 'Kiribati', iso: 'KIR', bounds: { lat_min: -7.0516717, lat_max: 7.9483283, lon_min: -179.1645388, lon_max: -164.1645388} }, { name: 'Saint Kitts and Nevis', iso: 'KNA', bounds: { lat_min: 16.895, lat_max: 17.6158146, lon_min: -63.051129, lon_max: -62.3303519} }, { name: 'Korea', iso: 'KOR', bounds: { lat_min: 37.52806, lat_max: 37.52816, lon_min: 126.89575, lon_max: 126.89585} }, { name: 'Kuwait', iso: 'KWT', bounds: { lat_min: -12.0494672, lat_max: -12.0094672, lon_min: -72.8801102, lon_max: -72.8401102} }, { name: 'Laos', iso: 'LAO', bounds: { lat_min: 13.9096752, lat_max: 22.5086717, lon_min: 100.0843247, lon_max: 107.6349989} }, { name: 'Lebanon', iso: 'LBN', bounds: { lat_min: 40.3199193, lat_max: 40.355802, lon_min: -76.4508668, lon_max: -76.391965} }, { name: 'Liberia', iso: 'LBR', bounds: { lat_min: 4.1555907, lat_max: 8.5519861, lon_min: -11.6080764, lon_max: -7.367323} }, { name: 'Libyan Arab Jamahiriya', iso: 'LBY', bounds: { lat_min: 19.5008138, lat_max: 33.3545898, lon_min: 9.391081, lon_max: 25.3770629} }, { name: 'Saint Lucia', iso: 'LCA', bounds: { lat_min: 13.508, lat_max: 14.2725, lon_min: -61.2853867, lon_max: -60.6669363} }, { name: 'Liechtenstein', iso: 'LIE', bounds: { lat_min: 47.0484291, lat_max: 47.270581, lon_min: 9.4716736, lon_max: 9.6357143} }, { name: 'Sri Lanka', iso: 'LKA', bounds: { lat_min: 25.2287738, lat_max: 25.2303051, lon_min: 55.1813071, lon_max: 55.1828523} }, { name: 'Lesotho', iso: 'LSO', bounds: { lat_min: -30.6772773, lat_max: -28.570615, lon_min: 27.0114632, lon_max: 29.4557099} }, { name: 'Lithuania', iso: 'LTU', bounds: { lat_min: 53.8967893, lat_max: 56.4504213, lon_min: 20.653783, lon_max: 26.8355198} }, { name: 'Luxembourg', iso: 'LUX', bounds: { lat_min: 49.4969821, lat_max: 50.430377, lon_min: 4.9684415, lon_max: 6.0344254} }, { name: 'Latvia', iso: 'LVA', bounds: { lat_min: 55.6746505, lat_max: 58.0855688, lon_min: 20.6715407, lon_max: 28.2414904} }, { name: 'Macao', iso: 'MAC', bounds: { lat_min: 25.2349583, lat_max: 25.2368385, lon_min: 55.1803834, lon_max: 55.1821684} }, { name: 'Saint Martin (French part)', iso: 'MAF', bounds: { lat_min: 17.8963535, lat_max: 18.1902778, lon_min: -63.3605643, lon_max: -62.7644063} }, { name: 'Morocco', iso: 'MAR', bounds: { lat_min: 21.3365321, lat_max: 36.0505269, lon_min: -17.2551456, lon_max: -0.998429} }, { name: 'Monaco', iso: 'MCO', bounds: { lat_min: 43.7247599, lat_max: 43.7519311, lon_min: 7.4090279, lon_max: 7.4398704} }, { name: 'Moldova', iso: 'MDA', bounds: { lat_min: 46.6744934, lat_max: 46.6745934, lon_min: 29.7521496, lon_max: 29.7522496} }, { name: 'Madagascar', iso: 'MDG', bounds: { lat_min: -25.6071002, lat_max: -11.9519693, lon_min: 43.2202072, lon_max: 50.4862553} }, { name: 'Maldives', iso: 'MDV', bounds: { lat_min: 25.2252959, lat_max: 25.2263769, lon_min: 55.1823199, lon_max: 55.1837469} }, { name: 'Mexico', iso: 'MEX', bounds: { lat_min: 19.2726009, lat_max: 19.5926009, lon_min: -99.2933416, lon_max: -98.9733416} }, { name: 'Marshall Islands', iso: 'MHL', bounds: { lat_min: -0.5481258, lat_max: 14.4518742, lon_min: 163.4985095, lon_max: 178.4985095} }, { name: 'Macedonia', iso: 'MKD', bounds: { lat_min: 40.8536596, lat_max: 42.3735359, lon_min: 20.4529023, lon_max: 23.034051} }, { name: 'Mali', iso: 'MLI', bounds: { lat_min: 10.147811, lat_max: 25.001084, lon_min: -12.2402835, lon_max: 4.2673828} }, { name: 'Malta', iso: 'MLT', bounds: { lat_min: 35.6029696, lat_max: 36.2852706, lon_min: 13.9324226, lon_max: 14.8267966} }, { name: 'Myanmar', iso: 'MMR', bounds: { lat_min: 9.4399432, lat_max: 28.547835, lon_min: 92.1719423, lon_max: 101.1700796} }, { name: 'Montenegro', iso: 'MNE', bounds: { lat_min: -29.8446455, lat_max: -29.5743342, lon_min: -51.662, lon_max: -51.3498193} }, { name: 'Mongolia', iso: 'MNG', bounds: { lat_min: 41.5800276, lat_max: 52.1496, lon_min: 87.73762, lon_max: 119.931949} }, { name: 'Northern Mariana Islands', iso: 'MNP', bounds: { lat_min: 14.036565, lat_max: 20.616556, lon_min: 144.813338, lon_max: 146.154418} }, { name: 'Mozambique', iso: 'MOZ', bounds: { lat_min: 19.038889, lat_max: 19.078889, lon_min: -96.274167, lon_max: -96.234167} }, { name: 'Mauritania', iso: 'MRT', bounds: { lat_min: 25.2143602, lat_max: 25.2163939, lon_min: 55.1665334, lon_max: 55.1690669} }, { name: 'Montserrat', iso: 'MSR', bounds: { lat_min: 16.475, lat_max: 17.0152978, lon_min: -62.450667, lon_max: -61.9353818} }, { name: 'Martinique', iso: 'MTQ', bounds: { lat_min: 14.3948596, lat_max: 14.8787029, lon_min: -61.2290815, lon_max: -60.8095833} }, { name: 'Mauritius', iso: 'MUS', bounds: { lat_min: -20.725, lat_max: -10.138, lon_min: 56.3825151, lon_max: 63.7151319} }, { name: 'Malawi', iso: 'MWI', bounds: { lat_min: -17.1296031, lat_max: -9.3683261, lon_min: 32.6703616, lon_max: 35.9185731} }, { name: 'Malaysia', iso: 'MYS', bounds: { lat_min: -5.1076241, lat_max: 9.8923759, lon_min: 105.3471939, lon_max: 120.3471939} }, { name: 'Mayotte', iso: 'MYT', bounds: { lat_min: -13.0210119, lat_max: -12.6365902, lon_min: 45.0183298, lon_max: 45.2999917} }, { name: 'Namibia', iso: 'NAM', bounds: { lat_min: -28.96945, lat_max: -16.9634855, lon_min: 11.5280384, lon_max: 25.2617671} }, { name: 'New Caledonia', iso: 'NCL', bounds: { lat_min: 33.0351363, lat_max: 33.0751363, lon_min: -92.6876556, lon_max: -92.6476556} }, { name: 'Niger', iso: 'NER', bounds: { lat_min: 11.693756, lat_max: 23.517178, lon_min: 0.1689653, lon_max: 15.996667} }, { name: 'Norfolk Island', iso: 'NFK', bounds: { lat_min: -29.333, lat_max: -28.796, lon_min: 167.6873878, lon_max: 168.2249543} }, { name: 'Nigeria', iso: 'NGA', bounds: { lat_min: 4.0690959, lat_max: 13.885645, lon_min: 2.676932, lon_max: 14.678014} }, { name: 'Nicaragua', iso: 'NIC', bounds: { lat_min: 10.7076565, lat_max: 15.0331183, lon_min: -87.901532, lon_max: -82.6227023} }, { name: 'Niue', iso: 'NIU', bounds: { lat_min: -19.0840514, lat_max: -19.0739661, lon_min: -169.9383436, lon_max: -169.9129672} }, { name: 'Netherlands', iso: 'NLD', bounds: { lat_min: 11.825, lat_max: 53.7253321, lon_min: -68.6255319, lon_max: 7.2274985} }, { name: 'Norway', iso: 'NOR', bounds: { lat_min: 57.7590052, lat_max: 71.3848787, lon_min: 4.0875274, lon_max: 31.7614911} }, { name: 'Nepal', iso: 'NPL', bounds: { lat_min: 26.3477581, lat_max: 30.446945, lon_min: 80.0586226, lon_max: 88.2015257} }, { name: 'Nauru', iso: 'NRU', bounds: { lat_min: -0.5541334, lat_max: -0.5025906, lon_min: 166.9091794, lon_max: 166.9589235} }, { name: 'New Zealand', iso: 'NZL', bounds: { lat_min: -52.8213687, lat_max: -29.0303303, lon_min: -179.059153, lon_max: 179.3643594} }, { name: 'Oman', iso: 'OMN', bounds: { lat_min: 25.2268538, lat_max: 25.2291352, lon_min: 55.1759911, lon_max: 55.1773672} }, { name: 'Pakistan', iso: 'PAK', bounds: { lat_min: 23.5393916, lat_max: 37.084107, lon_min: 60.872855, lon_max: 77.1203914} }, { name: 'Panama', iso: 'PAN', bounds: { lat_min: 35.246906, lat_max: 35.286906, lon_min: -119.0767707, lon_max: -119.0367707} }, { name: 'Pitcairn', iso: 'PCN', bounds: { lat_min: -25.1306736, lat_max: -23.8655769, lon_min: -130.8049862, lon_max: -124.717534} }, { name: 'Peru', iso: 'PER', bounds: { lat_min: 41.309511, lat_max: 41.38197, lon_min: -89.164781, lon_max: -89.105652} }, { name: 'Philippines', iso: 'PHL', bounds: { lat_min: 4.2158064, lat_max: 21.3217806, lon_min: 114.0952145, lon_max: 126.8072562} }, { name: 'Palau', iso: 'PLW', bounds: { lat_min: 42.5481153, lat_max: 42.5844284, lon_min: 2.9351868, lon_max: 2.9840518} }, { name: 'Papua New Guinea', iso: 'PNG', bounds: { lat_min: -13.1816069, lat_max: 1.8183931, lon_min: 136.7489081, lon_max: 151.7489081} }, { name: 'Poland', iso: 'POL', bounds: { lat_min: 49.0020468, lat_max: 55.0336963, lon_min: 14.1229707, lon_max: 24.145783} }, { name: 'Puerto Rico', iso: 'PRI', bounds: { lat_min: 17.9268695, lat_max: 18.5159789, lon_min: -67.271492, lon_max: -65.5897525} }, { name: 'North Korea', iso: 'PRK', bounds: { lat_min: 37.5867855, lat_max: 43.0089642, lon_min: 124.0913902, lon_max: 130.924647} }, { name: 'Portugal', iso: 'PRT', bounds: { lat_min: 29.8288021, lat_max: 42.1543112, lon_min: -31.5575303, lon_max: -6.1891593} }, { name: 'Paraguay', iso: 'PRY', bounds: { lat_min: -27.6063935, lat_max: -19.2876472, lon_min: -62.6442036, lon_max: -54.258} }, { name: 'Palestinian Territory', iso: 'PSE', bounds: { lat_min: 31.2201289, lat_max: 32.5521479, lon_min: 34.0689732, lon_max: 35.5739235} }, { name: 'French Polynesia', iso: 'PYF', bounds: { lat_min: -28.0990232, lat_max: -7.6592173, lon_min: -154.9360599, lon_max: -134.244799} }, { name: 'Qatar', iso: 'QAT', bounds: { lat_min: 25.2271767, lat_max: 25.2289841, lon_min: 55.1726803, lon_max: 55.1741485} }, { name: 'R_union', iso: 'REU', bounds: { lat_min: -21.3897308, lat_max: -20.8717136, lon_min: 55.2164268, lon_max: 55.8366924} }, { name: 'Romania', iso: 'ROU', bounds: { lat_min: 43.618682, lat_max: 48.2653964, lon_min: 20.2619773, lon_max: 30.0454257} }, { name: 'Russian Federation', iso: 'RUS', bounds: { lat_min: 41.1850968, lat_max: 82.0586232, lon_min: 19.6389, lon_max: 180} }, { name: 'Rwanda', iso: 'RWA', bounds: { lat_min: -2.8389804, lat_max: -1.0474083, lon_min: 28.8617546, lon_max: 30.8990738} }, { name: 'Saudi Arabia', iso: 'SAU', bounds: { lat_min: 14.4840316, lat_max: 14.4846897, lon_min: 121.0177023, lon_max: 121.0265441} }, { name: 'Sudan', iso: 'SDN', bounds: { lat_min: 10.88, lat_max: 10.92, lon_min: 6.48, lon_max: 6.52} }, { name: 'Senegal', iso: 'SEN', bounds: { lat_min: 12.2372838, lat_max: 16.6919712, lon_min: -17.7862419, lon_max: -11.3458996} }, { name: 'Singapore', iso: 'SGP', bounds: { lat_min: 1.1304753, lat_max: 1.4504753, lon_min: 103.6920359, lon_max: 104.0120359} }, { name: 'South Georgia and the South Sandwich Islands', iso: 'SGS', bounds: { lat_min: -59.684, lat_max: -53.3500755, lon_min: -42.354739, lon_max: -25.8468303} }, { name: 'Saint Helena', iso: 'SHN', bounds: { lat_min: -16.23, lat_max: -15.704, lon_min: -5.9973424, lon_max: -5.4234153} }, { name: 'Svalbard and Jan Mayen', iso: 'SJM', bounds: { lat_min: 70.6260825, lat_max: 81.028076, lon_min: -9.6848146, lon_max: 34.6891253} }, { name: 'Solomon Islands', iso: 'SLB', bounds: { lat_min: -13.2424298, lat_max: -4.81085, lon_min: 155.3190556, lon_max: 170.3964667} }, { name: 'Sierra Leone', iso: 'SLE', bounds: { lat_min: 6.755, lat_max: 9.999973, lon_min: -13.5003389, lon_max: -10.271683} }, { name: 'El Salvador', iso: 'SLV', bounds: { lat_min: 12.976046, lat_max: 14.4510488, lon_min: -90.1790975, lon_max: -87.6351394} }, { name: 'San Marino', iso: 'SMR', bounds: { lat_min: 43.8937002, lat_max: 43.992093, lon_min: 12.4033246, lon_max: 12.5160665} }, { name: 'Somalia', iso: 'SOM', bounds: { lat_min: -13.200556, lat_max: -13.160556, lon_min: 15.246667, lon_max: 15.286667} }, { name: 'Saint Pierre and Miquelon', iso: 'SPM', bounds: { lat_min: 46.5507173, lat_max: 47.365, lon_min: -56.6972961, lon_max: -55.9033333} }, { name: 'Serbia', iso: 'SRB', bounds: { lat_min: 42.2322435, lat_max: 46.1900524, lon_min: 18.8142875, lon_max: 23.006309} }, { name: 'Sao Tome and Principe', iso: 'STP', bounds: { lat_min: -0.2135137, lat_max: 1.9257601, lon_min: 6.260642, lon_max: 7.6704783} }, { name: 'Suriname', iso: 'SUR', bounds: { lat_min: 1.8312802, lat_max: 6.225, lon_min: -58.070833, lon_max: -53.8433358} }, { name: 'Slovakia', iso: 'SVK', bounds: { lat_min: 47.7314286, lat_max: 49.6138162, lon_min: 16.8331891, lon_max: 22.56571} }, { name: 'Slovenia', iso: 'SVN', bounds: { lat_min: 45.4214242, lat_max: 46.8766816, lon_min: 13.3754696, lon_max: 16.5967702} }, { name: 'Sweden', iso: 'SWE', bounds: { lat_min: 55.1331192, lat_max: 69.0599699, lon_min: 10.5930952, lon_max: 24.1776819} }, { name: 'Swaziland', iso: 'SWZ', bounds: { lat_min: 25.2156672, lat_max: 25.217255, lon_min: 55.1807318, lon_max: 55.18286} }, { name: 'Seychelles', iso: 'SYC', bounds: { lat_min: 25.2237725, lat_max: 25.2250726, lon_min: 55.1816849, lon_max: 55.184065} }, { name: 'Syrian Arab Republic', iso: 'SYR', bounds: { lat_min: 27.1401861, lat_max: 42.1401861, lon_min: 31.5494106, lon_max: 46.5494106} }, { name: 'Turks and Caicos Islands', iso: 'TCA', bounds: { lat_min: 20.9553418, lat_max: 22.1630989, lon_min: -72.6799046, lon_max: -70.8643591} }, { name: 'Chad', iso: 'TCD', bounds: { lat_min: 7.44107, lat_max: 23.4975, lon_min: 13.47348, lon_max: 24} }, { name: 'Togo', iso: 'TGO', bounds: { lat_min: 5.926547, lat_max: 11.1395102, lon_min: -0.1439746, lon_max: 1.8087605} }, { name: 'Thailand', iso: 'THA', bounds: { lat_min: 5.612851, lat_max: 20.4648337, lon_min: 97.3438072, lon_max: 105.636812} }, { name: 'Tajikistan', iso: 'TJK', bounds: { lat_min: 36.6711153, lat_max: 41.0450935, lon_min: 67.3332775, lon_max: 75.1539563} }, { name: 'Tokelau', iso: 'TKL', bounds: { lat_min: -9.6442499, lat_max: -8.3328631, lon_min: -172.7213673, lon_max: -170.9797586} }, { name: 'Turkmenistan', iso: 'TKM', bounds: { lat_min: 35.129093, lat_max: 42.7975571, lon_min: 52.335076, lon_max: 66.6895177} }, { name: 'Timor-Leste', iso: 'TLS', bounds: { lat_min: -6.3294157, lat_max: -6.3284839, lon_min: 106.9549541, lon_max: 106.9551755} }, { name: 'Tonga', iso: 'TON', bounds: { lat_min: -24.1034499, lat_max: -15.3655722, lon_min: -179.3866055, lon_max: -173.5295458} }, { name: 'Trinidad and Tobago', iso: 'TTO', bounds: { lat_min: 9.8732106, lat_max: 11.5628372, lon_min: -62.083056, lon_max: -60.2895848} }, { name: 'Tunisia', iso: 'TUN', bounds: { lat_min: 30.230236, lat_max: 37.7612052, lon_min: 7.5219807, lon_max: 11.8801133} }, { name: 'Turkey', iso: 'TUR', bounds: { lat_min: 35.8076804, lat_max: 42.297, lon_min: 25.6212891, lon_max: 44.8176638} }, { name: 'Tuvalu', iso: 'TUV', bounds: { lat_min: -10.9939389, lat_max: -5.4369611, lon_min: -180, lon_max: 180} }, { name: 'Taiwan', iso: 'TWN', bounds: { lat_min: 50.8832129, lat_max: 50.8833129, lon_min: 6.0296969, lon_max: 6.0297969} }, { name: 'Tanzania', iso: 'TZA', bounds: { lat_min: -6.8127308, lat_max: -6.812538, lon_min: 39.2895223, lon_max: 39.2897105} }, { name: 'Uganda', iso: 'UGA', bounds: { lat_min: -1.4823179, lat_max: 4.2340766, lon_min: 29.573433, lon_max: 35.000308} }, { name: 'Ukraine', iso: 'UKR', bounds: { lat_min: 44.184598, lat_max: 52.3791473, lon_min: 22.137059, lon_max: 40.2275801} }, { name: 'United States Minor Outlying Islands', iso: 'UMI', bounds: { lat_min: 6.1779744, lat_max: 6.6514388, lon_min: -162.6816297, lon_max: -162.1339885} }, { name: 'Uruguay', iso: 'URY', bounds: { lat_min: -35.7824481, lat_max: -30.0853962, lon_min: -58.4948438, lon_max: -53.0755833} }, { name: 'United States', iso: 'USA', bounds: { lat_min: 24.9493, lat_max: 49.5904, lon_min: -125.0011, lon_max: -66.9326} }, { name: 'Uzbekistan', iso: 'UZB', bounds: { lat_min: 37.1821164, lat_max: 45.590118, lon_min: 55.9977865, lon_max: 73.1397362} }, { name: 'Holy See (Vatican City State)', iso: 'VAT', bounds: { lat_min: 41.9002044, lat_max: 41.9073912, lon_min: 12.4457442, lon_max: 12.4583653} }, { name: 'Saint Vincent and the Grenadines', iso: 'VCT', bounds: { lat_min: 12.5166548, lat_max: 13.583, lon_min: -61.6657471, lon_max: -60.9094146} }, { name: 'Venezuela', iso: 'VEN', bounds: { lat_min: 0.647529, lat_max: 15.9158431, lon_min: -73.3529632, lon_max: -59.5427079} }, { name: 'Virgin Islands', iso: 'VGB', bounds: { lat_min: 17.623468, lat_max: 18.464984, lon_min: -65.159094, lon_max: -64.512674} }, { name: 'US Virgin Islands', iso: 'VIR', bounds: { lat_min: 17.623468, lat_max: 18.464984, lon_min: -65.159094, lon_max: -64.512674} }, { name: 'Viet Nam', iso: 'VNM', bounds: { lat_min: 8.1790665, lat_max: 23.393395, lon_min: 102.14441, lon_max: 114.3337595} }, { name: 'Vanuatu', iso: 'VUT', bounds: { lat_min: -20.4627425, lat_max: -12.8713777, lon_min: 166.3355255, lon_max: 170.449982} }, { name: 'Wallis and Futuna', iso: 'WLF', bounds: { lat_min: -14.5630748, lat_max: -12.9827961, lon_min: -178.3873749, lon_max: -175.9190391} }, { name: 'Samoa', iso: 'WSM', bounds: { lat_min: 40.7987372, lat_max: 40.8387372, lon_min: -124.2064518, lon_max: -124.1664518} }, { name: 'Yemen', iso: 'YEM', bounds: { lat_min: 11.9084802, lat_max: 19, lon_min: 41.60825, lon_max: 54.7389375} }, { name: 'South Africa', iso: 'ZAF', bounds: { lat_min: -47.1788335, lat_max: -22.1250301, lon_min: 16.3335213, lon_max: 38.2898954} }, { name: 'Zambia', iso: 'ZMB', bounds: { lat_min: -18.0765945, lat_max: -8.2712822, lon_min: 21.9993509, lon_max: 33.701111} }, { name: 'Zimbabwe', iso: 'ZWE', bounds: { lat_min: -22.4241096, lat_max: -15.6097033, lon_min: 25.2373, lon_max: 33.0683413} }
]


country_names["countries"].each do |country_name|
  unless country_name == country_name.upcase
    boundsUrl = ""
    url = "http://api.population.io:80/1.0/mortality-distribution/#{country_name.gsub(' ', '%20').split('/')[0]}/male/0y/today/"

    mort_response = RestClient.get(url) {|response, request, result| response}

    if mort_response.code == 200
      mortality_distr = JSON.parse(mort_response)["mortality_distribution"]

      status = country_statuses.find {|country| country["name"] == country_name}
      if !!status
        development = status["incomeLevel"]["value"]
      else
        development = nil
      end

      boundary = all_bounds.find {|country| country[:name] == country_name}
      if !!boundary
        bounds = boundary[:bounds]
      else
        bounds = nil
      end

      Country.create(name: country_name, mortality_distribution: mortality_distr, development: development, bounds: bounds)
      puts country_name
    end
  end
end
